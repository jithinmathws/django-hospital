{% extends 'home/base-login.html' %}
{% load compress static %}
{% block title %} Payment list {% endblock %}

{% block content %}

      
      <div class="content container-fluid">
         
         <div class="page-header">


        <div class="row align-items-center">
           <div class="col">
              <h3 class="page-title">Payment Details</h3>
              <ul class="breadcrumb">
                 <li class="breadcrumb-item"><a href="{% url 'Invoiceindex' %}">Dashboard</a></li>
                 <li class="breadcrumb-item active">List Invoice</li>
              </ul>
           </div>
           <div class="col-auto text-right float-right ml-auto">
              <a href="#" class="btn btn-outline-primary mr-2"><i class="fas fa-download"></i> Download</a>
              <a href="add-student.html" class="btn btn-primary"><i class="fas fa-plus"></i></a>
           </div>
        </div>
     </div>
     
     <div class="row">
        <div class="col-sm-12">
           <div class="card card-table">
              <div class="card-body">
                 <div class="table-responsive">
                    <table class="table table-hover table-center mb-0 datatable">
                       <thead>
                          <tr>
                           <form action="" method="POST">
                              {% csrf_token %}
                              <th>Patient Name<input type="text" name="name" value="{{name}}"
                                      class="form-control border border-secondary"></th>
                              <th>Payment Status<input type="text" name="status" value="{{status}}"
                                      class="form-control border border-secondary"></th>
                              <th>Date<input type="date" name="dat" value="{{dat}}"
                                      class="form-control border border-secondary"></th>
                              <th>Payment Amount<input type="number" name="amount" value="{{amount}}"
                                      class="form-control border border-secondary"></th>
                              <th>Balance Amount <input type="number" step="0.01" name="balance" value="{{balance}}"
                                      class="form-control border border-secondary"></th>
                              <th colspan="2"><button type="submit" name="filter" class="btn btn-warning w-100">Filter</button>
                              </th>
                          </form>
                             
                          </tr>
                       </thead>
                       {% for income in incomes %}
                       <tbody>
                          <tr>
                             
                             <td>
                                {{ income.patient_name }}
                             </td>

                             <td>
                                {{ income.payment_status }}
                             </td>
                           
                             <td>
                                {{ income.date }}
                             </td>
                             <td>
                                {{ income.payment_amount }}
                             </td>
                             <td>
                              {{ income.balance_amount }}
                              </td>

                             <td class="text-right">
                                <div class="actions">
                                   <a href="{% url 'income_edit' income.id %}" class="btn btn-sm bg-success-light mr-2">
                                   <i class="fas fa-pen"></i>
                                   </a>
                                   <a href="#" class="btn btn-sm bg-danger-light" onclick="confirmDelete('{{ income.income_status }}', '{{ income.id }}')">
                                   <i class="fas fa-trash"></i> 
                                   </a>
                                </div>
                             </td>
                          </tr>
                          
                       </tbody>
                       {% endfor %}
                    </table>

                    

                 </div>
                 
              </div>
            </div>
         </div>
      
   <script>
            function confirmDelete(roleName, roleId){
               if(confirm(`Are you sure you want to delete ${name}?`)) {
                  window.location.href = `{% url 'income_delete' income_id=0 %}`.replace('0', roleId);
               }
            }
   </script>
{% compress js %}   
  <script src="{% static 'prescol/plugins/datatables/datatables.min.js' %}"></script>
{% endcompress %}
  
  {% endblock %}
 