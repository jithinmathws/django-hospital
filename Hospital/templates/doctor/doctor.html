{% extends 'home/base-login.html' %}
{% load static %}
{% load widget_tweaks %}
{% block title %} Add new Doctor {% endblock %}

{% block content %}


    <div class="content container-fluid">
    
    <div class="page-header">
    <div class="row align-items-center">
    <div class="col">
    <h3 class="page-title">Add Role</h3>
    
    </div>
    </div>
    </div>
    
    <div class="row">
    <div class="col-sm-12">
    <div class="card">
    <div class="card-body">
    
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
    
        <div class="col-12 col-sm-6">
            <div class="form-group">

                {{ form.as_p }}
            
                <h3>Certificates</h3>
                <button type="button" class="btn btn-primary mt-3" onclick="addCertificateInput()">
                     Add Certificates
                </button>
                <div id="certificate-input-wrapper" class="mt-3">

                </div>
            </div>
        </div>
   
        <div class="col-12">
            <button type="submit" class="btn btn-primary">Submit</button>
            </div>
            </div>
    
    <!-- <div class="login-or">
    <span class="or-line"></span>
    <span class="span-or">or</span>
    </div>
    
    <div class="social-login">
    <span>Register with</span>
    <a href="#" class="facebook"><i class="fab fa-facebook-f"></i></a><a href="#" class="google"><i class="fab fa-google"></i></a>
    </div> -->
    
    <div class="text-center dont-have"><a href="{% url 'Dindex' %}">Back</a></div>
</div>
</div>
</div>
</div>


<script>
let certificateCounter = 0;
function addCertificateInput(){
        
    if (certificateCounter <= 9){
        let inputWrapper = document.getElementById('certificate-input-wrapper');
        let newInput = document.createElement('div');
        newInput.classList.add('input-group', 'mt-3');

        let fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.name = 'certificate_file';
        fileInput.classList.add('custom-file-input');
        fileInput.multiple = true;

        let customFileLabel = document.createElement('label');
        customFileLabel.classList.add('custom-file-label');
        customFileLabel.setAttribute('for', 'customFile')

        fileInput.addEventListener('change', function(){
            let fileName = Array.from(this.files).map(file => file.name).join(', ');
            customFileLabel.textContent = fileName;
        });

        let removeButton = document.createElement('button');
        removeButton.textContent = 'Remove';
        removeButton.type = 'button';
        removeButton.classList.add('btn', 'btn-danger');

        removeButton.addEventListener('click', function(){
            inputWrapper.removeChild(newInput);
            certificateCounter--;
            });

        let customFileDiv = document.createElement('div');
        customFileDiv.classList.add('custom-file');
        customFileDiv.appendChild(fileInput);
        customFileDiv.appendChild(customFileLabel);

        let inputGroupAppend = document.createElement('div');
        inputGroupAppend.classList.add('input-group-append');
        inputGroupAppend.appendChild(removeButton);

        newInput.appendChild(customFileDiv);
        newInput.appendChild(inputGroupAppend);
        inputWrapper.appendChild(newInput);
        certificateCounter++;

        }
    }
</script>

{% endblock %}